name: Weather update

concurrency: readme_update

on: 
  workflow_dispatch:
  schedule:
    - cron: "*/30 * * * *"

jobs: 
  update-weather-image:
    runs-on: ubuntu-latest
    steps:
    - name: Screenshot Website
      id: screenshot
      uses: swinton/screenshot-website@v1.x
      with:
        source: https://svanboxel.github.io/secret-profile/
        destination: weather.png
        width: 725
        height: 260
        delay: 5
    - uses: actions/checkout@v2
    - run: cp ${{ steps.screenshot.outputs.path }} weather.png
    - uses: stefanzweifel/git-auto-commit-action@v4
      with:
        commit_message: Update weather image
        branch: main
        commit_user_name: My GitHub Actions Bot # defaults to "GitHub Actions"
        commit_user_email: my-github-actions-bot@example.org # defaults to "actions@github.com"
        commit_author: Author <actions@github.com> # defaults to author of the commit that triggered the run
    - name: Upload a Build Artifact
      uses: actions/upload-artifact@v2.2.3
      with:
        path: weather.png
     
